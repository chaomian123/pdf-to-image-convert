<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF to Image Converter | PDFè½¬å›¾ç‰‡è½¬æ¢å™¨</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind CSS è‡ªå®šä¹‰é…ç½® -->
    <script>
        window.tailwind = {
            config: {
                darkMode: ['class'],
                theme: {
                    container: {
                        center: true,
                        padding: "2rem",
                        screens: {
                            "2xl": "1400px",
                        },
                    },
                    extend: {
                        colors: {
                            border: "hsl(var(--border))",
                            input: "hsl(var(--input))",
                            ring: "hsl(var(--ring))",
                            background: "hsl(var(--background))",
                            foreground: "hsl(var(--foreground))",
                            primary: {
                                DEFAULT: "hsl(var(--primary))",
                                foreground: "hsl(var(--primary-foreground))",
                            },
                            secondary: {
                                DEFAULT: "hsl(var(--secondary))",
                                foreground: "hsl(var(--secondary-foreground))",
                            },
                            destructive: {
                                DEFAULT: "hsl(var(--destructive))",
                                foreground: "hsl(var(--destructive-foreground))",
                            },
                            muted: {
                                DEFAULT: "hsl(var(--muted))",
                                foreground: "hsl(var(--muted-foreground))",
                            },
                            accent: {
                                DEFAULT: "hsl(var(--accent))",
                                foreground: "hsl(var(--accent-foreground))",
                            },
                            popover: {
                                DEFAULT: "hsl(var(--popover))",
                                foreground: "hsl(var(--popover-foreground))",
                            },
                            card: {
                                DEFAULT: "hsl(var(--card))",
                                foreground: "hsl(var(--card-foreground))",
                            },
                        },
                        borderRadius: {
                            lg: "var(--radius)",
                            md: "calc(var(--radius) - 2px)",
                            sm: "calc(var(--radius) - 4px)",
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
  --background: 44.0000 42.8571% 93.1373%;
  --foreground: 28.5714 16.5354% 24.9020%;
  --card: 42.0000 100.0000% 98.0392%;
  --card-foreground: 28.5714 16.5354% 24.9020%;
  --popover: 42.0000 100.0000% 98.0392%;
  --popover-foreground: 28.5714 16.5354% 24.9020%;
  --primary: 30.0000 33.8710% 48.6275%;
  --primary-foreground: 0 0% 100%;
  --secondary: 40.6452 34.8315% 82.5490%;
  --secondary-foreground: 28.9655 18.7097% 30.3922%;
  --muted: 39 34.4828% 88.6275%;
  --muted-foreground: 32.3077 18.4834% 41.3725%;
  --accent: 42.8571 32.8125% 74.9020%;
  --accent-foreground: 28.5714 16.5354% 24.9020%;
  --destructive: 9.8438 54.7009% 45.8824%;
  --destructive-foreground: 0 0% 100%;
  --border: 40.0000 31.4286% 79.4118%;
  --input: 40.0000 31.4286% 79.4118%;
  --ring: 30.0000 33.8710% 48.6275%;
  --chart-1: 30.0000 33.8710% 48.6275%;
  --chart-2: 31.3846 29.9539% 42.5490%;
  --chart-3: 33.6842 32.9480% 33.9216%;
  --chart-4: 29.1176 30.9091% 56.8627%;
  --chart-5: 30 33.6842% 62.7451%;
  --sidebar: 39 34.4828% 88.6275%;
  --sidebar-foreground: 28.5714 16.5354% 24.9020%;
  --sidebar-primary: 30.0000 33.8710% 48.6275%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 42.8571 32.8125% 74.9020%;
  --sidebar-accent-foreground: 28.5714 16.5354% 24.9020%;
  --sidebar-border: 40.0000 31.4286% 79.4118%;
  --sidebar-ring: 30.0000 33.8710% 48.6275%;
  --font-sans: Libre Baskerville, serif;
  --font-serif: Lora, serif;
  --font-mono: IBM Plex Mono, monospace;
  --radius: 0.25rem;
  --shadow-2xs: 2px 3px 5px 0px hsl(28 13% 20% / 0.06);
  --shadow-xs: 2px 3px 5px 0px hsl(28 13% 20% / 0.06);
  --shadow-sm: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 1px 2px -1px hsl(28 13% 20% / 0.12);
  --shadow: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 1px 2px -1px hsl(28 13% 20% / 0.12);
  --shadow-md: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 2px 4px -1px hsl(28 13% 20% / 0.12);
  --shadow-lg: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 4px 6px -1px hsl(28 13% 20% / 0.12);
  --shadow-xl: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 8px 10px -1px hsl(28 13% 20% / 0.12);
  --shadow-2xl: 2px 3px 5px 0px hsl(28 13% 20% / 0.30);
}

.dark {
  --background: 25.0000 15.3846% 15.2941%;
  --foreground: 39 34.4828% 88.6275%;
  --card: 25.7143 13.7255% 20%;
  --card-foreground: 39 34.4828% 88.6275%;
  --popover: 25.7143 13.7255% 20%;
  --popover-foreground: 39 34.4828% 88.6275%;
  --primary: 30 33.6842% 62.7451%;
  --primary-foreground: 25.0000 15.3846% 15.2941%;
  --secondary: 24.7059 12.9771% 25.6863%;
  --secondary-foreground: 39 34.4828% 88.6275%;
  --muted: 25.7143 13.7255% 20%;
  --muted-foreground: 38.4000 17.7305% 72.3529%;
  --accent: 24.4444 17.8808% 29.6078%;
  --accent-foreground: 39 34.4828% 88.6275%;
  --destructive: 9.8438 54.7009% 45.8824%;
  --destructive-foreground: 0 0% 100%;
  --border: 24.7059 12.9771% 25.6863%;
  --input: 24.7059 12.9771% 25.6863%;
  --ring: 30 33.6842% 62.7451%;
  --chart-1: 30 33.6842% 62.7451%;
  --chart-2: 29.1176 30.9091% 56.8627%;
  --chart-3: 30.0000 33.8710% 48.6275%;
  --chart-4: 31.3846 29.9539% 42.5490%;
  --chart-5: 33.6842 32.9480% 33.9216%;
  --sidebar: 25.0000 15.3846% 15.2941%;
  --sidebar-foreground: 39 34.4828% 88.6275%;
  --sidebar-primary: 30 33.6842% 62.7451%;
  --sidebar-primary-foreground: 25.0000 15.3846% 15.2941%;
  --sidebar-accent: 24.4444 17.8808% 29.6078%;
  --sidebar-accent-foreground: 39 34.4828% 88.6275%;
  --sidebar-border: 24.7059 12.9771% 25.6863%;
  --sidebar-ring: 30 33.6842% 62.7451%;
  --font-sans: Libre Baskerville, serif;
  --font-serif: Lora, serif;
  --font-mono: IBM Plex Mono, monospace;
  --radius: 0.25rem;
  --shadow-2xs: 2px 3px 5px 0px hsl(28 13% 20% / 0.06);
  --shadow-xs: 2px 3px 5px 0px hsl(28 13% 20% / 0.06);
  --shadow-sm: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 1px 2px -1px hsl(28 13% 20% / 0.12);
  --shadow: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 1px 2px -1px hsl(28 13% 20% / 0.12);
  --shadow-md: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 2px 4px -1px hsl(28 13% 20% / 0.12);
  --shadow-lg: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 4px 6px -1px hsl(28 13% 20% / 0.12);
  --shadow-xl: 2px 3px 5px 0px hsl(28 13% 20% / 0.12), 2px 8px 10px -1px hsl(28 13% 20% / 0.12);
  --shadow-2xl: 2px 3px 5px 0px hsl(28 13% 20% / 0.30);
}

        /* åŸºç¡€æ ·å¼ */
        * {
            border-color: hsl(var(--border));
        }

        body {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Shadcn/UI ç»„ä»¶æ ·å¼ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            outline: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem 1rem;
            min-height: 2.5rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }

        .btn-primary:hover:not(:disabled) {
            background-color: hsl(var(--primary) / 0.9);
        }

        .btn-secondary {
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
        }

        .btn-secondary:hover:not(:disabled) {
            background-color: hsl(var(--secondary) / 0.8);
        }

        .btn-outline {
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
        }

        .btn-outline:hover:not(:disabled) {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }

        .btn-destructive {
            background-color: hsl(var(--destructive));
            color: hsl(var(--destructive-foreground));
        }

        .btn-destructive:hover:not(:disabled) {
            background-color: hsl(var(--destructive) / 0.9);
        }

        .btn-ghost {
            background-color: transparent;
            color: hsl(var(--foreground));
        }

        .btn-ghost:hover:not(:disabled) {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }

        .card {
            border-radius: calc(var(--radius) + 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--card));
            color: hsl(var(--card-foreground));
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }

        .input {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: calc(var(--radius) - 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            color: hsl(var(--foreground));
            outline: none;
            transition: border-color 0.2s;
        }

        .input:focus {
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }

        .input::placeholder {
            color: hsl(var(--muted-foreground));
        }

        .select {
            display: flex;
            height: 2.5rem;
            width: 100%;
            border-radius: calc(var(--radius) - 2px);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            color: hsl(var(--foreground));
            outline: none;
            cursor: pointer;
        }

        .select:focus {
            border-color: hsl(var(--ring));
            box-shadow: 0 0 0 2px hsl(var(--ring) / 0.2);
        }

        .label {
            font-size: 0.875rem;
            font-weight: 500;
            line-height: 1;
            color: hsl(var(--foreground));
        }

        .progress-bar {
            height: 0.5rem;
            width: 100%;
            overflow: hidden;
            border-radius: 9999px;
            background-color: hsl(var(--secondary));
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            background-color: hsl(var(--primary));
        }

        .alert {
            position: relative;
            width: 100%;
            border-radius: calc(var(--radius));
            border: 1px solid hsl(var(--border));
            padding: 1rem;
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
        }

        .alert-destructive {
            border-color: hsl(var(--destructive) / 0.5);
            color: hsl(var(--destructive));
            background-color: hsl(var(--destructive) / 0.1);
        }

        .upload-box {
            border: 2px dashed hsl(var(--border));
            border-radius: calc(var(--radius) + 4px);
            background-color: hsl(var(--muted) / 0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-box:hover {
            border-color: hsl(var(--primary));
            background-color: hsl(var(--primary) / 0.05);
        }

        .upload-box.dragover {
            border-color: hsl(var(--primary));
            background-color: hsl(var(--primary) / 0.1);
            transform: scale(1.02);
        }

        .image-preview {
            border-radius: calc(var(--radius));
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--muted) / 0.1);
        }

        /* ä¸»é¢˜å’Œè¯­è¨€åˆ‡æ¢æŒ‰é’® */
        .controls {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            display: flex;
            gap: 0.5rem;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .controls {
                position: relative;
                top: 0;
                right: 0;
                justify-content: center;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- ä¸»é¢˜å’Œè¯­è¨€æ§åˆ¶ -->
    <div class="controls">
        <button class="btn btn-ghost" onclick="toggleLanguage()" title="åˆ‡æ¢è¯­è¨€ / Switch Language">
            <span id="language-icon">ğŸŒ</span>
        </button>
        <button class="btn btn-ghost" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜ / Toggle Theme">
            <span id="theme-icon">ğŸŒ™</span>
        </button>
    </div>

    <div class="min-h-screen bg-background">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <!-- å¤´éƒ¨ -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-foreground mb-4" data-key="title">PDFè½¬å›¾ç‰‡è½¬æ¢å™¨</h1>
                <p class="text-lg text-muted-foreground" data-key="subtitle">ç®€å•ã€å¿«é€Ÿã€å®‰å…¨çš„PDFè½¬æ¢å·¥å…·</p>
            </div>

            <!-- ä¸Šä¼ åŒºåŸŸ -->
            <div class="card mb-6">
                <div class="p-8">
                    <div class="upload-box p-12 text-center" id="uploadBox">
                        <div class="text-6xl mb-4">ğŸ“„</div>
                        <div class="text-xl font-medium text-foreground mb-2" data-key="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½PDFæ–‡ä»¶åˆ°è¿™é‡Œ</div>
                        <div class="text-sm text-muted-foreground mb-4" data-key="upload-hint">æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæ–‡ä»¶å¤§å°é™åˆ¶50MB</div>
                        <div class="text-sm text-primary font-medium" id="modeHint" data-key="mode-hint">é€‰æ‹©"é•¿æ¡æ¨¡å¼"å¯å°†å¤šé¡µåˆå¹¶ä¸ºä¸€å¼ é•¿å›¾å¹¶è‡ªåŠ¨å»é™¤ç©ºç™½</div>
                        <input type="file" id="fileInput" accept=".pdf" class="hidden" />
                    </div>
                </div>
            </div>

            <!-- è®¾ç½®é€‰é¡¹ -->
            <div class="card mb-6">
                <div class="p-6">
                    <h3 class="text-lg font-semibold mb-4" data-key="settings-title">è½¬æ¢è®¾ç½®</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="label" data-key="mode-label">è½¬æ¢æ¨¡å¼</label>
                            <select id="modeSelect" class="select">
                                <option value="separate" data-key="mode-separate">åˆ†é¡µæ¨¡å¼ (æ¯é¡µå•ç‹¬å›¾ç‰‡)</option>
                                <option value="merge" data-key="mode-merge">é•¿æ¡æ¨¡å¼ (åˆå¹¶ä¸ºä¸€å¼ é•¿å›¾)</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="label" data-key="format-label">å›¾ç‰‡æ ¼å¼</label>
                            <select id="formatSelect" class="select">
                                <option value="png" data-key="format-png">PNG (é«˜è´¨é‡)</option>
                                <option value="jpeg" data-key="format-jpeg">JPEG (è¾ƒå°æ–‡ä»¶)</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="label" data-key="quality-label">å›¾ç‰‡è´¨é‡</label>
                            <select id="qualitySelect" class="select">
                                <option value="1" data-key="quality-low">ä½è´¨é‡ (1x)</option>
                                <option value="1.5" selected data-key="quality-standard">æ ‡å‡†è´¨é‡ (1.5x)</option>
                                <option value="2" data-key="quality-high">é«˜è´¨é‡ (2x)</option>
                                <option value="3" data-key="quality-ultra">è¶…é«˜è´¨é‡ (3x)</option>
                            </select>
                        </div>
                        <div class="space-y-2" id="trimSetting" style="display: none;">
                            <label class="label" data-key="trim-label">å»é™¤ç©ºç™½</label>
                            <select id="trimSelect" class="select">
                                <option value="auto" selected data-key="trim-auto">è‡ªåŠ¨æ£€æµ‹å¹¶å»é™¤</option>
                                <option value="top" data-key="trim-top">ä»…å»é™¤é¡¶éƒ¨ç©ºç™½</option>
                                <option value="bottom" data-key="trim-bottom">ä»…å»é™¤åº•éƒ¨ç©ºç™½</option>
                                <option value="none" data-key="trim-none">ä¸å»é™¤ç©ºç™½</option>
                            </select>
                        </div>
                        <div class="space-y-2" id="spacingSetting" style="display: none;">
                            <label class="label" data-key="spacing-label">é¡µé¢é—´è·</label>
                            <select id="spacingSelect" class="select">
                                <option value="0" data-key="spacing-none">æ— é—´è·</option>
                                <option value="10" selected data-key="spacing-small">å°é—´è· (10px)</option>
                                <option value="20" data-key="spacing-medium">ä¸­é—´è· (20px)</option>
                                <option value="30" data-key="spacing-large">å¤§é—´è· (30px)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ–‡ä»¶ä¿¡æ¯ -->
            <div class="card mb-6" id="fileInfo" style="display: none;">
                <div class="p-6">
                    <h3 class="text-lg font-semibold mb-2" data-key="file-info-title">æ–‡ä»¶ä¿¡æ¯</h3>
                    <p id="fileDetails" class="text-muted-foreground"></p>
                </div>
            </div>

            <!-- è¿›åº¦æ¡ -->
            <div class="card mb-6" id="progressContainer" style="display: none;">
                <div class="p-6">
                    <div class="progress-bar mb-2">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="text-center text-sm text-muted-foreground" id="progressText">å‡†å¤‡è½¬æ¢...</div>
                </div>
            </div>

            <!-- é”™è¯¯ä¿¡æ¯ -->
            <div class="alert alert-destructive mb-6" id="errorMessage" style="display: none;"></div>

            <!-- è½¬æ¢ç»“æœ -->
            <div class="card" id="results" style="display: none;">
                <div class="p-6">
                    <h2 class="text-2xl font-semibold text-center mb-6" data-key="results-title">è½¬æ¢å®Œæˆ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6" id="imageGrid"></div>
                    <div class="flex justify-center gap-4">
                        <button class="btn btn-primary" id="downloadAllBtn" onclick="downloadAllImages()">
                            <span data-key="download-all">ä¸‹è½½æ‰€æœ‰å›¾ç‰‡</span>
                        </button>
                        <button class="btn btn-outline" id="resetBtn" onclick="resetApp()">
                            <span data-key="reset">è½¬æ¢æ–°æ–‡ä»¶</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        // å¤šè¯­è¨€é…ç½®
        const translations = {
            zh: {
                'title': 'PDFè½¬å›¾ç‰‡è½¬æ¢å™¨',
                'subtitle': 'ç®€å•ã€å¿«é€Ÿã€å®‰å…¨çš„PDFè½¬æ¢å·¥å…·',
                'upload-text': 'ç‚¹å‡»æˆ–æ‹–æ‹½PDFæ–‡ä»¶åˆ°è¿™é‡Œ',
                'upload-hint': 'æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæ–‡ä»¶å¤§å°é™åˆ¶50MB',
                'mode-hint': 'é€‰æ‹©"é•¿æ¡æ¨¡å¼"å¯å°†å¤šé¡µåˆå¹¶ä¸ºä¸€å¼ é•¿å›¾å¹¶è‡ªåŠ¨å»é™¤ç©ºç™½',
                'settings-title': 'è½¬æ¢è®¾ç½®',
                'mode-label': 'è½¬æ¢æ¨¡å¼',
                'mode-separate': 'åˆ†é¡µæ¨¡å¼ (æ¯é¡µå•ç‹¬å›¾ç‰‡)',
                'mode-merge': 'é•¿æ¡æ¨¡å¼ (åˆå¹¶ä¸ºä¸€å¼ é•¿å›¾)',
                'format-label': 'å›¾ç‰‡æ ¼å¼',
                'format-png': 'PNG (é«˜è´¨é‡)',
                'format-jpeg': 'JPEG (è¾ƒå°æ–‡ä»¶)',
                'quality-label': 'å›¾ç‰‡è´¨é‡',
                'quality-low': 'ä½è´¨é‡ (1x)',
                'quality-standard': 'æ ‡å‡†è´¨é‡ (1.5x)',
                'quality-high': 'é«˜è´¨é‡ (2x)',
                'quality-ultra': 'è¶…é«˜è´¨é‡ (3x)',
                'trim-label': 'å»é™¤ç©ºç™½',
                'trim-auto': 'è‡ªåŠ¨æ£€æµ‹å¹¶å»é™¤',
                'trim-top': 'ä»…å»é™¤é¡¶éƒ¨ç©ºç™½',
                'trim-bottom': 'ä»…å»é™¤åº•éƒ¨ç©ºç™½',
                'trim-none': 'ä¸å»é™¤ç©ºç™½',
                'spacing-label': 'é¡µé¢é—´è·',
                'spacing-none': 'æ— é—´è·',
                'spacing-small': 'å°é—´è· (10px)',
                'spacing-medium': 'ä¸­é—´è· (20px)',
                'spacing-large': 'å¤§é—´è· (30px)',
                'file-info-title': 'æ–‡ä»¶ä¿¡æ¯',
                'results-title': 'è½¬æ¢å®Œæˆ',
                'download-all': 'ä¸‹è½½æ‰€æœ‰å›¾ç‰‡',
                'download-long': 'ä¸‹è½½é•¿å›¾',
                'reset': 'è½¬æ¢æ–°æ–‡ä»¶',
                'page': 'ç¬¬ {0} é¡µ',
                'download': 'ä¸‹è½½',
                'long-image': 'é•¿å›¾æ¨¡å¼ ({0} é¡µåˆå¹¶)',
                'download-long-image': 'ä¸‹è½½é•¿å›¾',
                'error-file-type': 'è¯·é€‰æ‹©PDFæ–‡ä»¶ï¼',
                'error-file-size': 'æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MBï¼',
                'error-conversion': 'PDFè½¬æ¢å¤±è´¥: {0}',
                'status-reading': 'æ­£åœ¨è¯»å–PDFæ–‡ä»¶...',
                'status-found-pages': 'å‘ç° {0} é¡µï¼Œå¼€å§‹è½¬æ¢...',
                'status-converting': 'æ­£åœ¨è½¬æ¢ç¬¬ {0}/{1} é¡µ...',
                'status-rendering': 'æ­£åœ¨æ¸²æŸ“ç¬¬ {0}/{1} é¡µ...',
                'status-processing': 'æ­£åœ¨å¤„ç†ç©ºç™½åŒºåŸŸ...',
                'status-trimming': 'æ­£åœ¨å¤„ç†ç¬¬ {0} é¡µç©ºç™½...',
                'status-merging': 'æ­£åœ¨åˆå¹¶ä¸ºé•¿å›¾...',
                'status-complete': 'è½¬æ¢å®Œæˆï¼',
                'status-packing': 'æ­£åœ¨æ‰“åŒ…...',
                'error-packing': 'æ‰“åŒ…ä¸‹è½½å¤±è´¥: {0}',
                'file-info': 'æ–‡ä»¶å: {0} | å¤§å°: {1}MB'
            },
            en: {
                'title': 'PDF to Image Converter',
                'subtitle': 'Simple, fast, and secure PDF conversion tool',
                'upload-text': 'Click or drag PDF files here',
                'upload-hint': 'Supports drag and drop, file size limit 50MB',
                'mode-hint': 'Select "Long Mode" to merge pages into one long image with automatic whitespace removal',
                'settings-title': 'Conversion Settings',
                'mode-label': 'Conversion Mode',
                'mode-separate': 'Separate Mode (Individual images per page)',
                'mode-merge': 'Long Mode (Merge into one long image)',
                'format-label': 'Image Format',
                'format-png': 'PNG (High Quality)',
                'format-jpeg': 'JPEG (Smaller File)',
                'quality-label': 'Image Quality',
                'quality-low': 'Low Quality (1x)',
                'quality-standard': 'Standard Quality (1.5x)',
                'quality-high': 'High Quality (2x)',
                'quality-ultra': 'Ultra Quality (3x)',
                'trim-label': 'Whitespace Removal',
                'trim-auto': 'Auto detect and remove',
                'trim-top': 'Remove top whitespace only',
                'trim-bottom': 'Remove bottom whitespace only',
                'trim-none': 'No whitespace removal',
                'spacing-label': 'Page Spacing',
                'spacing-none': 'No spacing',
                'spacing-small': 'Small spacing (10px)',
                'spacing-medium': 'Medium spacing (20px)',
                'spacing-large': 'Large spacing (30px)',
                'file-info-title': 'File Information',
                'results-title': 'Conversion Complete',
                'download-all': 'Download All Images',
                'download-long': 'Download Long Image',
                'reset': 'Convert New File',
                'page': 'Page {0}',
                'download': 'Download',
                'long-image': 'Long Image Mode ({0} pages merged)',
                'download-long-image': 'Download Long Image',
                'error-file-type': 'Please select a PDF file!',
                'error-file-size': 'File size cannot exceed 50MB!',
                'error-conversion': 'PDF conversion failed: {0}',
                'status-reading': 'Reading PDF file...',
                'status-found-pages': 'Found {0} pages, starting conversion...',
                'status-converting': 'Converting page {0}/{1}...',
                'status-rendering': 'Rendering page {0}/{1}...',
                'status-processing': 'Processing whitespace areas...',
                'status-trimming': 'Processing page {0} whitespace...',
                'status-merging': 'Merging into long image...',
                'status-complete': 'Conversion complete!',
                'status-packing': 'Packing...',
                'error-packing': 'Packing download failed: {0}',
                'file-info': 'Filename: {0} | Size: {1}MB'
            }
        };

        // è®¾ç½® PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // å…¨å±€å˜é‡
        let currentLanguage = localStorage.getItem('language') || 'zh';
        let convertedImages = [];
        let mergedImage = null;

        // DOM å…ƒç´ 
        const uploadBox = document.getElementById('uploadBox');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const fileDetails = document.getElementById('fileDetails');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const errorMessage = document.getElementById('errorMessage');
        const results = document.getElementById('results');
        const imageGrid = document.getElementById('imageGrid');
        const modeSelect = document.getElementById('modeSelect');
        const formatSelect = document.getElementById('formatSelect');
        const qualitySelect = document.getElementById('qualitySelect');
        const trimSelect = document.getElementById('trimSelect');
        const spacingSelect = document.getElementById('spacingSelect');
        const trimSetting = document.getElementById('trimSetting');
        const spacingSetting = document.getElementById('spacingSetting');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const resetBtn = document.getElementById('resetBtn');

        // å¤šè¯­è¨€å‡½æ•°
        function t(key, ...args) {
            let text = translations[currentLanguage][key] || key;
            args.forEach((arg, index) => {
                text = text.replace(`{${index}}`, arg);
            });
            return text;
        }

        function updateLanguage() {
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (element.tagName === 'OPTION') {
                    element.textContent = t(key);
                } else {
                    element.textContent = t(key);
                }
            });
            
            // æ›´æ–°æ–‡æ¡£è¯­è¨€å±æ€§
            document.documentElement.lang = currentLanguage === 'zh' ? 'zh-CN' : 'en';
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = currentLanguage === 'zh' ? 'PDFè½¬å›¾ç‰‡è½¬æ¢å™¨' : 'PDF to Image Converter';
            
            // æ›´æ–°æ¨¡å¼æç¤º
            updateModeHint();
            
            // æ›´æ–°ä¸‹è½½æŒ‰é’®æ–‡æœ¬
            updateDownloadButtonText();
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
        }

        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const html = document.documentElement;
            const themeIcon = document.getElementById('theme-icon');
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                themeIcon.textContent = 'ğŸŒ™';
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                themeIcon.textContent = 'â˜€ï¸';
                localStorage.setItem('theme', 'dark');
            }
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.classList.add('dark');
                document.getElementById('theme-icon').textContent = 'â˜€ï¸';
            }
        }

        // äº‹ä»¶ç›‘å¬
        uploadBox.addEventListener('click', () => fileInput.click());
        uploadBox.addEventListener('dragover', handleDragOver);
        uploadBox.addEventListener('dragleave', handleDragLeave);
        uploadBox.addEventListener('drop', handleDrop);
        fileInput.addEventListener('change', handleFileSelect);
        modeSelect.addEventListener('change', handleModeChange);

        // æ‹–æ‹½äº‹ä»¶å¤„ç†
        function handleDragOver(e) {
            e.preventDefault();
            uploadBox.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadBox.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadBox.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        // æ¨¡å¼åˆ‡æ¢å¤„ç†
        function handleModeChange() {
            const isLongMode = modeSelect.value === 'merge';
            trimSetting.style.display = isLongMode ? 'block' : 'none';
            spacingSetting.style.display = isLongMode ? 'block' : 'none';
            updateModeHint();
            updateDownloadButtonText();
        }

        // æ›´æ–°æ¨¡å¼æç¤º
        function updateModeHint() {
            const modeHint = document.getElementById('modeHint');
            const mode = modeSelect.value;
            
            if (mode === 'merge') {
                modeHint.textContent = t('mode-hint');
                modeHint.className = 'text-sm text-primary font-medium';
            } else {
                modeHint.textContent = currentLanguage === 'zh' ? 
                    'åˆ†é¡µæ¨¡å¼ï¼šæ¯ä¸ªPDFé¡µé¢è½¬æ¢ä¸ºå•ç‹¬çš„å›¾ç‰‡æ–‡ä»¶' : 
                    'Separate mode: Convert each PDF page to individual image files';
                modeHint.className = 'text-sm text-muted-foreground font-medium';
            }
        }

        // æ›´æ–°ä¸‹è½½æŒ‰é’®æ–‡æœ¬
        function updateDownloadButtonText() {
            const mode = modeSelect.value;
            const downloadText = mode === 'merge' ? t('download-long') : t('download-all');
            downloadAllBtn.querySelector('span').textContent = downloadText;
        }

        // æ–‡ä»¶å¤„ç†
        function handleFile(file) {
            // éªŒè¯æ–‡ä»¶ç±»å‹
            if (file.type !== 'application/pdf') {
                showError(t('error-file-type'));
                return;
            }

            // éªŒè¯æ–‡ä»¶å¤§å° (50MB)
            if (file.size > 50 * 1024 * 1024) {
                showError(t('error-file-size'));
                return;
            }

            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            showFileInfo(file);

            // å¼€å§‹è½¬æ¢
            convertPDFToImages(file);
        }

        // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
        function showFileInfo(file) {
            const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
            fileDetails.textContent = t('file-info', file.name, sizeInMB);
            fileInfo.style.display = 'block';
        }

        // PDFè½¬å›¾ç‰‡æ ¸å¿ƒåŠŸèƒ½
        async function convertPDFToImages(file) {
            try {
                hideError();
                showProgress(0, t('status-reading'));

                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                
                showProgress(10, t('status-found-pages', pdf.numPages));

                const mode = modeSelect.value;
                const format = formatSelect.value;
                const scale = parseFloat(qualitySelect.value);

                if (mode === 'separate') {
                    await convertToSeparateImages(pdf, format, scale);
                } else {
                    await convertToLongImage(pdf, format, scale);
                }

                showProgress(100, t('status-complete'));
                setTimeout(() => {
                    hideProgress();
                    showResults();
                }, 500);

            } catch (error) {
                console.error('è½¬æ¢å¤±è´¥:', error);
                showError(t('error-conversion', error.message));
                hideProgress();
            }
        }

        // åˆ†é¡µæ¨¡å¼è½¬æ¢
        async function convertToSeparateImages(pdf, format, scale) {
            convertedImages = [];
            imageGrid.innerHTML = '';

            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                const progress = 10 + (pageNum / pdf.numPages) * 80;
                showProgress(progress, t('status-converting', pageNum, pdf.numPages));

                const page = await pdf.getPage(pageNum);
                const viewport = page.getViewport({ scale });

                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                await page.render({
                    canvasContext: context,
                    viewport: viewport
                }).promise;

                const mimeType = format === 'png' ? 'image/png' : 'image/jpeg';
                const quality = format === 'jpeg' ? 0.9 : undefined;
                const dataUrl = canvas.toDataURL(mimeType, quality);

                convertedImages.push({
                    dataUrl,
                    pageNumber: pageNum,
                    filename: `page_${pageNum.toString().padStart(3, '0')}.${format}`
                });

                addImageToGrid(dataUrl, pageNum, format, true);
            }
        }

        // é•¿æ¡æ¨¡å¼è½¬æ¢
        async function convertToLongImage(pdf, format, scale) {
            const trimMode = trimSelect.value;
            const spacing = parseInt(spacingSelect.value);
            const pageCanvases = [];

            // ç¬¬ä¸€æ­¥ï¼šæ¸²æŸ“æ‰€æœ‰é¡µé¢
            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                const progress = 10 + (pageNum / pdf.numPages) * 40;
                showProgress(progress, t('status-rendering', pageNum, pdf.numPages));

                const page = await pdf.getPage(pageNum);
                const viewport = page.getViewport({ scale });

                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                await page.render({
                    canvasContext: context,
                    viewport: viewport
                }).promise;

                pageCanvases.push(canvas);
            }

            // ç¬¬äºŒæ­¥ï¼šå¤„ç†ç©ºç™½å’Œåˆå¹¶
            showProgress(60, t('status-processing'));
            
            const trimmedCanvases = pageCanvases.map((canvas, index) => {
                showProgress(60 + (index / pageCanvases.length) * 20, t('status-trimming', index + 1));
                return trimWhitespace(canvas, trimMode);
            });

            // ç¬¬ä¸‰æ­¥ï¼šåˆå¹¶ä¸ºé•¿å›¾
            showProgress(80, t('status-merging'));
            const mergedCanvas = await mergeCanvases(trimmedCanvases, spacing);

            const mimeType = format === 'png' ? 'image/png' : 'image/jpeg';
            const quality = format === 'jpeg' ? 0.9 : undefined;
            const dataUrl = mergedCanvas.toDataURL(mimeType, quality);

            mergedImage = {
                dataUrl,
                filename: `merged_long_image.${format}`,
                width: mergedCanvas.width,
                height: mergedCanvas.height
            };

            // æ¸…ç©ºç½‘æ ¼å¹¶æ·»åŠ é•¿å›¾é¢„è§ˆ
            imageGrid.innerHTML = '';
            addLongImageToGrid(dataUrl, pdf.numPages, format);
        }

        // å»é™¤ç©ºç™½çš„å‡½æ•°
        function trimWhitespace(canvas, trimMode) {
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            let top = 0, bottom = canvas.height, left = 0, right = canvas.width;

            // æ£€æµ‹ç©ºç™½åŒºåŸŸ (ç™½è‰²æˆ–æ¥è¿‘ç™½è‰²çš„åƒç´ )
            function isWhitePixel(r, g, b, a) {
                if (a < 10) return true; // é€æ˜åƒç´ 
                return r > 250 && g > 250 && b > 250; // æ¥è¿‘ç™½è‰²
            }

            if (trimMode === 'auto' || trimMode === 'top') {
                // æ£€æµ‹é¡¶éƒ¨ç©ºç™½
                topLoop: for (let y = 0; y < canvas.height; y++) {
                    for (let x = 0; x < canvas.width; x++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        const a = data[idx + 3];
                        if (!isWhitePixel(r, g, b, a)) {
                            top = Math.max(0, y - 10);
                            break topLoop;
                        }
                    }
                }
            }

            if (trimMode === 'auto' || trimMode === 'bottom') {
                // æ£€æµ‹åº•éƒ¨ç©ºç™½
                bottomLoop: for (let y = canvas.height - 1; y >= 0; y--) {
                    for (let x = 0; x < canvas.width; x++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        const a = data[idx + 3];
                        if (!isWhitePixel(r, g, b, a)) {
                            bottom = Math.min(canvas.height, y + 10);
                            break bottomLoop;
                        }
                    }
                }
            }

            if (trimMode === 'auto') {
                // æ£€æµ‹å·¦ä¾§ç©ºç™½
                leftLoop: for (let x = 0; x < canvas.width; x++) {
                    for (let y = top; y < bottom; y++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        const a = data[idx + 3];
                        if (!isWhitePixel(r, g, b, a)) {
                            left = Math.max(0, x - 5);
                            break leftLoop;
                        }
                    }
                }

                // æ£€æµ‹å³ä¾§ç©ºç™½
                rightLoop: for (let x = canvas.width - 1; x >= 0; x--) {
                    for (let y = top; y < bottom; y++) {
                        const idx = (y * canvas.width + x) * 4;
                        const r = data[idx];
                        const g = data[idx + 1];
                        const b = data[idx + 2];
                        const a = data[idx + 3];
                        if (!isWhitePixel(r, g, b, a)) {
                            right = Math.min(canvas.width, x + 5);
                            break rightLoop;
                        }
                    }
                }
            }

            // åˆ›å»ºè£å‰ªåçš„canvas
            const trimmedCanvas = document.createElement('canvas');
            const trimmedCtx = trimmedCanvas.getContext('2d');
            
            const newWidth = right - left;
            const newHeight = bottom - top;
            
            trimmedCanvas.width = newWidth;
            trimmedCanvas.height = newHeight;

            trimmedCtx.drawImage(
                canvas,
                left, top, newWidth, newHeight,
                0, 0, newWidth, newHeight
            );

            return trimmedCanvas;
        }

        // åˆå¹¶å¤šä¸ªcanvasä¸ºé•¿å›¾
        async function mergeCanvases(canvases, spacing) {
            if (canvases.length === 0) return null;

            const maxWidth = Math.max(...canvases.map(c => c.width));
            const totalHeight = canvases.reduce((sum, c) => sum + c.height, 0) + spacing * (canvases.length - 1);

            const mergedCanvas = document.createElement('canvas');
            const ctx = mergedCanvas.getContext('2d');
            
            mergedCanvas.width = maxWidth;
            mergedCanvas.height = totalHeight;

            // å¡«å……ç™½è‰²èƒŒæ™¯
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, maxWidth, totalHeight);

            // é€ä¸ªç»˜åˆ¶é¡µé¢
            let currentY = 0;
            for (let i = 0; i < canvases.length; i++) {
                const canvas = canvases[i];
                const x = Math.floor((maxWidth - canvas.width) / 2);
                
                ctx.drawImage(canvas, x, currentY);
                currentY += canvas.height + spacing;
            }

            return mergedCanvas;
        }

        // æ·»åŠ å›¾ç‰‡åˆ°ç½‘æ ¼
        function addImageToGrid(dataUrl, pageNumber, format, showDownload = true) {
            const imageItem = document.createElement('div');
            imageItem.className = 'card overflow-hidden';
            
            const downloadBtn = showDownload ? 
                `<button class="btn btn-primary btn-sm mt-2" onclick="downloadImage(${pageNumber - 1})">${t('download')}</button>` : '';
            
            imageItem.innerHTML = `
                <img src="${dataUrl}" alt="Page ${pageNumber}" class="image-preview w-full h-48 object-contain">
                <div class="p-4 text-center">
                    <div class="font-medium text-foreground mb-2">${t('page', pageNumber)}</div>
                    ${downloadBtn}
                </div>
            `;
            
            imageGrid.appendChild(imageItem);
        }

        // æ·»åŠ é•¿å›¾åˆ°ç½‘æ ¼
        function addLongImageToGrid(dataUrl, totalPages, format) {
            const imageItem = document.createElement('div');
            imageItem.className = 'card overflow-hidden col-span-full';
            
            const sizeInfo = mergedImage ? `${mergedImage.width} Ã— ${mergedImage.height}px` : '';
            
            imageItem.innerHTML = `
                <img src="${dataUrl}" alt="Merged Long Image" class="image-preview w-full h-auto max-h-96 object-contain">
                <div class="p-4 text-center">
                    <div class="font-medium text-foreground mb-1">${t('long-image', totalPages)}</div>
                    <div class="text-sm text-muted-foreground mb-3">${sizeInfo}</div>
                    <button class="btn btn-primary" onclick="downloadLongImage()">${t('download-long-image')}</button>
                </div>
            `;
            
            imageGrid.appendChild(imageItem);
        }

        // ä¸‹è½½å•ä¸ªå›¾ç‰‡
        function downloadImage(index) {
            if (convertedImages[index]) {
                const image = convertedImages[index];
                const link = document.createElement('a');
                link.download = image.filename;
                link.href = image.dataUrl;
                link.click();
            }
        }

        // ä¸‹è½½é•¿å›¾
        function downloadLongImage() {
            if (mergedImage) {
                const link = document.createElement('a');
                link.download = mergedImage.filename;
                link.href = mergedImage.dataUrl;
                link.click();
            }
        }

        // ä¸‹è½½æ‰€æœ‰å›¾ç‰‡
        async function downloadAllImages() {
            const mode = modeSelect.value;
            
            if (mode === 'merge') {
                downloadLongImage();
                return;
            }

            if (convertedImages.length === 0) return;

            try {
                downloadAllBtn.querySelector('span').textContent = t('status-packing');
                downloadAllBtn.disabled = true;

                const zip = new JSZip();
                
                for (const image of convertedImages) {
                    const response = await fetch(image.dataUrl);
                    const blob = await response.blob();
                    zip.file(image.filename, blob);
                }

                const zipBlob = await zip.generateAsync({ type: 'blob' });
                const link = document.createElement('a');
                link.download = 'pdf_images.zip';
                link.href = URL.createObjectURL(zipBlob);
                link.click();

                downloadAllBtn.querySelector('span').textContent = t('download-all');
                downloadAllBtn.disabled = false;

            } catch (error) {
                showError(t('error-packing', error.message));
                downloadAllBtn.querySelector('span').textContent = t('download-all');
                downloadAllBtn.disabled = false;
            }
        }

        // æ˜¾ç¤º/éšè—è¿›åº¦
        function showProgress(percent, text) {
            progressContainer.style.display = 'block';
            progressFill.style.width = percent + '%';
            progressText.textContent = text;
        }

        function hideProgress() {
            progressContainer.style.display = 'none';
        }

        // æ˜¾ç¤º/éšè—é”™è¯¯
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
        }

        function hideError() {
            errorMessage.style.display = 'none';
        }

        // æ˜¾ç¤ºç»“æœ
        function showResults() {
            results.style.display = 'block';
        }

        // é‡ç½®åº”ç”¨
        function resetApp() {
            fileInput.value = '';
            fileInfo.style.display = 'none';
            results.style.display = 'none';
            imageGrid.innerHTML = '';
            convertedImages = [];
            mergedImage = null;
            hideError();
            hideProgress();
            updateDownloadButtonText();
        }

        // åˆå§‹åŒ–
        function init() {
            initTheme();
            updateLanguage();
            handleModeChange();
            
            // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        document.documentElement.classList.add('dark');
                        document.getElementById('theme-icon').textContent = 'â˜€ï¸';
                    } else {
                        document.documentElement.classList.remove('dark');
                        document.getElementById('theme-icon').textContent = 'ğŸŒ™';
                    }
                }
            });
        }

        // é˜²æ­¢é¡µé¢æ‹–æ‹½æ‰“å¼€æ–‡ä»¶
        document.addEventListener('dragover', e => e.preventDefault());
        document.addEventListener('drop', e => e.preventDefault());

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>